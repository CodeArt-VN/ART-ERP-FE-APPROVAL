<ion-header>
    <ion-toolbar class="no-padding">
        <ion-buttons slot="start">
            <ion-button color="dark" class="ion-hide-sm-down">
                {{'erp.app.pages.approval.request.page-title-modal' | translate}}
            </ion-button>
        </ion-buttons>
        <ion-buttons slot="end">
            <ion-button (click)="refresh()" title="{{'erp.app.pages.approval.request.refresh' | translate}}">
                <ion-icon slot="icon-only" name="reload-outline"></ion-icon>
            </ion-button>

            <ion-button title="{{'erp.app.pages.approval.request.help' | translate}}" (click)="help()">
                <ion-icon slot="icon-only" name="help-circle-outline"></ion-icon>
            </ion-button>

            <ion-button title="{{'erp.app.pages.approval.request.close-modal' | translate}}" color="secondary" (click)="closeModal()">
                <ion-icon slot="icon-only" name="close"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content appScrollbarTheme class="ion-padding" fullscreen>
    <form [formGroup]="formGroup">
        <ion-grid fixed>
            <ion-row>

                <ion-col size="12" size-sm="12" size-md="12">
                    <div class="c-control">
                        <label class="c-label" for="Type">{{'erp.app.pages.approval.request.type' | translate}}
                            <span *ngIf="!formGroup.controls.Type.valid && !formGroup.controls.Type.pending && (formGroup.controls.Type.dirty || submitAttempt)" ion-text color="danger">(*)</span>
                        </label>
                        <ng-select class="c-input" labelForId="Type" formControlName="Type" [items]="requestTypeList" bindLabel="Name" bindValue="Code" placeholder="{{'erp.app.pages.approval.request.search-placeholder' | translate}}">
                            <ng-template ng-option-tmp let-i="item" let-search="searchTerm">
                                <div *ngIf="i">
                                    <div> <span *ngFor="let l of i.levels">&nbsp;&nbsp;&nbsp;</span> <span [ngOptionHighlight]="search">{{i.Name}}</span></div>
                                </div>
                            </ng-template>
                        </ng-select>
                    </div>

                    <div class="c-control" *ngIf="formGroup.controls.Type.value == 'TimeOff'">
                        <label class="c-label" for="SubType">{{'erp.app.pages.approval.request.sub-type' | translate}}
                            <span *ngIf="!formGroup.controls.SubType.valid && !formGroup.controls.SubType.pending && (formGroup.controls.SubType.dirty || submitAttempt)" ion-text color="danger">(*)</span>
                        </label>
                        <ng-select class="c-input" labelForId="SubType" formControlName="SubType" [items]="timeOffTypeList" bindLabel="Name" bindValue="Code" placeholder="{{'erp.app.pages.approval.request.search-placeholder' | translate}}">
                            <ng-template ng-option-tmp let-i="item" let-search="searchTerm">
                                <div *ngIf="i">
                                    <div> <span *ngFor="let l of i.levels">&nbsp;&nbsp;&nbsp;</span> <span [ngOptionHighlight]="search">{{i.Name}}</span></div>
                                </div>
                            </ng-template>
                        </ng-select>
                    </div>


                    <div class="c-control">
                        <label class="c-label" for="Name">{{'erp.app.pages.approval.request.name' | translate}}
                            <span *ngIf="!formGroup.controls.Name.valid && !formGroup.controls.Name.pending && (formGroup.controls.Name.dirty || submitAttempt)" ion-text color="danger">(*)</span>
                        </label>
                        <input class="c-input" id="Name" formControlName="Name" type="text">
                    </div>
                    <div class="c-control">
                        <label class="c-label" for="Remark">{{'erp.app.pages.approval.request.remark' | translate}}
                            <span *ngIf="!formGroup.controls.Remark.valid && !formGroup.controls.Remark.pending && (formGroup.controls.Remark.dirty || submitAttempt)" ion-text color="danger">(*)</span>
                        </label>
                        <textarea rows="3" class="c-input remark" id="Remark" formControlName="Remark" type="textarea"></textarea>
                    </div>
                </ion-col>

                <ion-col size="12" size-sm="12" size-md="6">
                    <div class="c-control">
                        <label class="c-label" for="Start">{{'erp.app.pages.approval.request.start' | translate}}
                            <span *ngIf="!formGroup.controls.Start.valid && !formGroup.controls.Start.pending && (formGroup.controls.Start.dirty || submitAttempt)" ion-text color="danger">(*)</span>
                        </label>
                        <input class="c-input" id="Start" formControlName="Start" type="date">
                    </div>
                </ion-col>
                <ion-col size="12" size-sm="12" size-md="6">
                    <div class="c-control">
                        <label class="c-label" for="End">{{'erp.app.pages.approval.request.end' | translate}}
                            <span *ngIf="!formGroup.controls.End.valid && !formGroup.controls.End.pending && (formGroup.controls.End.dirty || submitAttempt)" ion-text color="danger">(*)</span>
                        </label>
                        <input class="c-input" id="End" formControlName="End" type="date">
                    </div>
                </ion-col>

                <ion-col size="12" size-sm="12" size-md="12">
                    <div class="c-control" *ngIf="formGroup.controls.Type.value == 'Payment'">
                        <label class="c-label" for="Amount"> <span *ngIf="formGroup.controls.Type.value == 'Payment'">{{'erp.app.pages.approval.request.amount' | translate}}</span>
                            <span *ngIf="!formGroup.controls.Amount.valid && !formGroup.controls.Amount.pending && (formGroup.controls.Amount.dirty || submitAttempt)" ion-text color="danger">(*)</span>
                        </label>
                        <input class="c-input" id="Amount" formControlName="Amount" type="number">
                    </div>
                </ion-col>

            </ion-row>
            <ion-row>
                <ion-col>
                    <div class="c-control ion-text-right">
                        <label class="c-label" for=""></label>
                        
                        <ion-button color="warning" (click)="submit('Pending')">{{'erp.app.pages.approval.request.submit' | translate}}</ion-button>
                        <ion-button color="primary" (click)="submit()" fill="outline">{{'erp.app.pages.approval.request.draft' | translate}}</ion-button>
                    </div>
                </ion-col>
            </ion-row>
        </ion-grid>

    </form>
</ion-content>